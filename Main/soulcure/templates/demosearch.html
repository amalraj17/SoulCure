<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Therapist Search</title>
</head>
<body>
    <h1>Search for Therapists</h1>

    <form id="search-form">
        <input type="text" id="query" name="query" placeholder="Search by Name or Therapy">
        <button type="submit">Search</button>
    </form>

    <div id="results">
        <!-- Results will be displayed here using JavaScript -->
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#search-form").submit(function (e) {
                e.preventDefault();
    
                // Get search query from form
                var query = $("#query").val();
    
                // Send AJAX request
                $.ajax({
                    type: "GET",
                    url: "{% url 'search_therapists2' %}",  // Replace with the actual URL
                    data: { query: query },
                    dataType: "json",
                    success: function (data) {
                        // Update results on the page
                        var resultsHtml = "";
                        data.therapists.forEach(function (therapist) {
                            // Create a card for each therapist
                            resultsHtml += '<div class="col-lg-6 team-item">';
                            resultsHtml += '<a href="{% url 'view-therapist' user_id=therapist.id %}">';
                            resultsHtml += '<div class="row g-0 bg-light rounded overflow-hidden">';
                            resultsHtml += '<div class="col-12 col-sm-5 h-100">';
                            resultsHtml += '<img class="img-fluid h-100" src="' + therapist.profile_picture + '" style="object-fit: cover;">';
                            resultsHtml += '</div>';
                            resultsHtml += '<div class="col-12 col-sm-6 h-100 d-flex flex-column">';
                            resultsHtml += '<div class="mt-3 p-5">';
                            resultsHtml += '<h3 class="mb-5">' + therapist.name + '</h3>';
                            resultsHtml += '<h5 class="fw-normal fst-italic text-primary mb-2">' + therapist.therapy + '</h5>';
                            resultsHtml += '<h5 class="fw-normal text-dark mb-4">Experience: ' + therapist.experience + ' Years</h5>';
                            resultsHtml += '<p class="m-0">' + therapist.certification_name + '</p>';
                            resultsHtml += '</div>';
                            resultsHtml += '</div>';
                            resultsHtml += '<div class="col-12 col-sm-1 h-100">';
                            resultsHtml += '</div>';
                            resultsHtml += '</div>';
                            resultsHtml += '</a>';
                            resultsHtml += '</div>';
                        });
                        $("#results").html(resultsHtml);
                    },
                });
            });
        });
    </script>
    
</body>
</html>
